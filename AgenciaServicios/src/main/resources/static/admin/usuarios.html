<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <title>Administración - Usuarios</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <script src="/js/usuarios.js" defer></script>
</head>

<body class="bg-[#0D0D0D] text-white min-h-screen flex">
    <!-- SIDEBAR -->
    <aside class="w-64 bg-black/80 border-r border-orange-600/20 flex flex-col justify-between py-6 px-4">
        <div>
            <h2 class="text-3xl font-bold text-orange-500 border-b border-gray-700 pb-2 mb-6 text-center">
                Siscare
            </h2>

            <nav class="flex flex-col gap-1">
                <a href="/admin/panelAdmin.html" class="flex items-center gap-3 p-3 rounded hover:bg-orange-500/20 transition">
                    <i class="bx bx-home text-xl"></i> Panel
                </a>

                <a href="/admin/servicios.html" class="flex items-center gap-3 p-3 rounded hover:bg-orange-500/20 transition">
                    <i class="bx bx-wrench text-xl"></i> Servicios
                </a>

                <a href="/admin/usuarios.html" class="flex items-center gap-3 p-3 rounded bg-orange-500/20 transition">
                    <i class="bx bx-id-card text-xl"></i> Usuarios
                </a>

                <!-- Sección de Catálogos -->
                <div>
                    <button id="btnCatalogos"
                        class="flex justify-between items-center w-full p-3 hover:bg-orange-500/20 rounded transition">
                        <span class="flex items-center gap-3"><i class="bx bx-folder text-xl"></i> Catálogos</span>
                        <i id="iconArrow" class="bx bx-chevron-down text-xl"></i>
                    </button>

                    <div id="submenuCatalogos" class="pl-10 mt-1 flex flex-col hidden">
                        <a href="/admin/catalogoTiposServicio.html"
                            class="block py-2 text-sm hover:text-orange-400">Tipos de Servicio</a>
                        <a href="/admin/catalogoRefacciones.html"
                            class="block py-2 text-sm hover:text-orange-400">Refacciones</a>
                        <a href="/admin/catalogoMarcas.html" class="block py-2 text-sm hover:text-orange-400">Marcas</a>
                        <a href="/admin/catalogoModelos.html"
                            class="block py-2 text-sm hover:text-orange-400">Modelos</a>
                    </div>
                </div>
            </nav>
        </div>

        <div class="border-t border-gray-700 pt-4">
            <a href="#" class="flex items-center gap-3 p-3 hover:bg-red-500/30 rounded transition text-red-400">
                <i class="bx bx-log-out text-xl"></i> Cerrar Sesión
            </a>
        </div>
    </aside>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="flex-1 flex flex-col">
        <!-- NAVBAR SUPERIOR -->
        <header
            class="flex justify-between items-center px-8 py-4 border-b border-gray-800 bg-[#111]/80 backdrop-blur-sm">

            <!-- Icono de usuario -->
            <div class="flex items-center gap-3">
                <span class="text-gray-300 text-sm">Administrador</span>
                <button class="bg-orange-600 hover:bg-orange-500 p-2 rounded-full transition">
                    <i class="bx bx-user text-white text-xl"></i>
                </button>
            </div>
        </header>

        <!-- CONTENIDO -->
        <section class="p-8 flex-1 overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h1 class="text-3xl font-bold">Gestión de Usuarios</h1>
                    <p class="text-gray-400 text-sm">
                        Administra los usuarios del sistema
                    </p>
                </div>

                <a href="/admin/altaUsuarios.html"
                    class="flex items-center gap-2 bg-orange-600 hover:bg-orange-500 transition px-4 py-2 rounded shadow">
                    <i class="bx bx-plus"></i> Agregar Usuario
                </a>
            </div>

            <!-- Tabla -->
            <div class="bg-[#1A1A1A] p-4 rounded-xl border border-gray-700">
                <table class="w-full text-sm">
                    <thead class="border-b border-gray-700 text-orange-400">
                        <tr>
                            <th class="py-2 text-left">ID</th>
                            <th class="text-left">Usuario</th>
                            <th class="text-left">Nombre Completo</th>
                            <th class="text-left">Email</th>
                            <th class="text-left">Rol</th>
                            <th class="text-left">Fecha Creación</th>
                            <th class="text-left">Activo</th>
                            <th class="text-center">Acciones</th>
                        </tr>
                    </thead>

                    <tbody id="tablaUsuarios">
                        <!-- Los usuarios se cargarán dinámicamente aquí -->
                        <tr class="border-b border-gray-800 hover:bg-black/40">
                            <td class="py-2">1</td>
                            <td>admin</td>
                            <td>Administrador Principal</td>
                            <td>admin@siscare.com</td>
                            <td><span class="bg-red-500/20 text-red-400 px-2 py-1 rounded-full text-xs">Admin</span></td>
                            <td>2023-10-15</td>
                            <td class="text-green-400">Sí</td>
                            <td class="text-center flex gap-2 justify-center py-2">
                                <button onclick="editarUsuario(1)">
                                    <i class="bx bx-edit text-blue-400 text-xl"></i>
                                </button>
                                <button onclick="eliminarUsuario(1)">
                                    <i class="bx bx-trash text-red-500 text-xl"></i>
                                </button>
                            </td>
                        </tr>
                        <tr class="border-b border-gray-800 hover:bg-black/40">
                            <td class="py-2">2</td>
                            <td>juan.perez</td>
                            <td>Juan Pérez García</td>
                            <td>juan.perez@siscare.com</td>
                            <td><span class="bg-blue-500/20 text-blue-400 px-2 py-1 rounded-full text-xs">Trabajador</span></td>
                            <td>2023-11-20</td>
                            <td class="text-green-400">Sí</td>
                            <td class="text-center flex gap-2 justify-center py-2">
                                <button onclick="editarUsuario(2)">
                                    <i class="bx bx-edit text-blue-400 text-xl"></i>
                                </button>
                                <button onclick="eliminarUsuario(2)">
                                    <i class="bx bx-trash text-red-500 text-xl"></i>
                                </button>
                            </td>
                        </tr>
                        <tr class="border-b border-gray-800 hover:bg-black/40">
                            <td class="py-2">3</td>
                            <td>maria.lopez</td>
                            <td>María López Hernández</td>
                            <td>maria.lopez@cliente.com</td>
                            <td><span class="bg-green-500/20 text-green-400 px-2 py-1 rounded-full text-xs">Cliente</span></td>
                            <td>2024-01-05</td>
                            <td class="text-green-400">Sí</td>
                            <td class="text-center flex gap-2 justify-center py-2">
                                <button onclick="editarUsuario(3)">
                                    <i class="bx bx-edit text-blue-400 text-xl"></i>
                                </button>
                                <button onclick="eliminarUsuario(3)">
                                    <i class="bx bx-trash text-red-500 text-xl"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- Modal de Edición -->
    <div id="modalEditarUsuario" class="fixed inset-0 bg-black/70 backdrop-blur-md hidden flex justify-center items-center z-50">
        <div
            class="bg-[#1A1A1A]/95 p-8 rounded-2xl shadow-xl border border-orange-500/30 w-[500px] animate-[zoomIn_.3s_ease] relative">
            <button onclick="cerrarModalEditar()" class="absolute top-3 right-3 text-gray-400 hover:text-white text-xl">
                <i class="bx bx-x"></i>
            </button>

            <h2 class="text-2xl font-bold mb-6 text-orange-500">Editar Usuario</h2>

            <form id="formEditarUsuario">
                <input type="hidden" id="idUsuarioEditar" />
                
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <label>
                        <span class="text-sm text-gray-300">Usuario</span>
                        <input id="inputUsuario" type="text"
                            class="mt-1 w-full bg-black/30 border border-gray-700 text-white p-3 rounded-lg focus:border-orange-500 transition" />
                    </label>
                    
                    <label>
                        <span class="text-sm text-gray-300">Contraseña</span>
                        <input id="inputPassword" type="password"
                            class="mt-1 w-full bg-black/30 border border-gray-700 text-white p-3 rounded-lg focus:border-orange-500 transition" 
                            placeholder="Dejar en blanco para no cambiar"/>
                    </label>
                </div>
                
                <label class="block mb-4">
                    <span class="text-sm text-gray-300">Nombre Completo</span>
                    <input id="inputNombre" type="text"
                        class="mt-1 w-full bg-black/30 border border-gray-700 text-white p-3 rounded-lg focus:border-orange-500 transition" />
                </label>
                
                <label class="block mb-4">
                    <span class="text-sm text-gray-300">Email</span>
                    <input id="inputEmail" type="email"
                        class="mt-1 w-full bg-black/30 border border-gray-700 text-white p-3 rounded-lg focus:border-orange-500 transition" />
                </label>
                
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <label>
                        <span class="text-sm text-gray-300">Rol</span>
                        <select id="selectRol"
                            class="mt-1 w-full bg-black/30 border border-gray-700 text-white p-3 rounded-lg focus:border-orange-500 transition">
                            <option value="admin">Administrador</option>
                            <option value="trabajador">Trabajador</option>
                            <option value="cliente">Cliente</option>
                        </select>
                    </label>
                    
                    <label class="flex items-center gap-2 mt-6">
                        <input id="checkActivo" type="checkbox" class="accent-orange-500" />
                        <span class="text-gray-300 text-sm">Activo</span>
                    </label>
                </div>

                <div class="flex justify-end gap-3">
                    <button type="button" onclick="cerrarModalEditar()"
                        class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg">
                        Cancelar
                    </button>

                    <button type="submit" class="px-6 py-2 bg-orange-600 hover:bg-orange-500 rounded-lg font-semibold">
                        Guardar Cambios
                    </button>
                </div>
            </form>
        </div>
    </div>

    <style>
        @keyframes zoomIn {
            0% {
                opacity: 0;
                transform: scale(0.85);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        tbody tr {
            transition: background-color 0.2s ease, transform 0.2s ease;
        }

        tbody tr:hover {
            background-color: rgba(255, 140, 0, 0.05);
            transform: scale(1.01);
        }
    </style>

    <script>
        // Submenú de Catálogos
        const btnCatalogos = document.getElementById("btnCatalogos");
        const submenu = document.getElementById("submenuCatalogos");
        const iconArrow = document.getElementById("iconArrow");

        btnCatalogos.addEventListener("click", () => {
            submenu.classList.toggle("hidden");
            iconArrow.classList.toggle("bx-chevron-down");
            iconArrow.classList.toggle("bx-chevron-up");
        });

        // Funciones para la gestión de usuarios
        function editarUsuario(id) {
            // aquí cargarías los datos del usuario desde la BD
            document.getElementById('idUsuarioEditar').value = id;
            document.getElementById('inputUsuario').value = 'usuario' + id;
            document.getElementById('inputNombre').value = 'Nombre del Usuario ' + id;
            document.getElementById('inputEmail').value = 'usuario' + id + '@siscare.com';
            document.getElementById('selectRol').value = 'trabajador';
            document.getElementById('checkActivo').checked = true;
            
            document.getElementById('modalEditarUsuario').classList.remove('hidden');
        }

        function eliminarUsuario(id) {
            if (confirm('¿Estás seguro de que deseas eliminar este usuario?')) {
                //aquí enviarías una solicitud para eliminar el usuario
                alert('Usuario eliminado (simulación)');
            }
        }

        function cerrarModalEditar() {
            document.getElementById('modalEditarUsuario').classList.add('hidden');
        }

        // Manejo del formulario de edición
        document.getElementById('formEditarUsuario').addEventListener('submit', function(e) {
            e.preventDefault();
            
            //  aquí enviarías los datos actualizados al servidor
            alert('Usuario actualizado (simulación)');
            cerrarModalEditar();
        });
    </script>
</body>

</html>